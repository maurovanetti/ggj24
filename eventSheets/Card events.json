{
	"name": "Card events",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Draw Cards",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 931744644285487
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "CardSpawnArea",
							"sid": 522664265568875,
							"parameters": {
								"instance-variable": "Available",
								"value": "false"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "DeckArray",
							"sid": 950837205291790,
							"parameters": {
								"instance-variable": "Index",
								"value": "0"
							}
						},
						{
							"type": "comment",
							"text": "By default, the deck starts from 0, but this can be ovverriden by the Start object for testing purposes"
						}
					],
					"sid": 131067983032678,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Start",
									"sid": 517794959491951,
									"parameters": {
										"animation": "\"In Use\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "DeckArray",
									"sid": 332172302821659,
									"parameters": {
										"instance-variable": "Index",
										"value": "Start.SkipCards"
									}
								}
							],
							"sid": 478921376452225
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 576206975491553,
									"parameters": {
										"first-value": "LayoutName",
										"comparison": 0,
										"second-value": "\"Level 1\""
									}
								}
							],
							"actions": [
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 305982799206407,
									"parameters": {
										"tag": "\"Deck\"",
										"file": "Deck1.json"
									}
								}
							],
							"sid": 277170886254106
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 182430070153914
								}
							],
							"actions": [
								{
									"id": "request-project-file",
									"objectClass": "AJAX",
									"sid": 249758516012936,
									"parameters": {
										"tag": "\"Deck\"",
										"file": "Deck0.json"
									}
								}
							],
							"sid": 697254889748534
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-completed",
							"objectClass": "AJAX",
							"sid": 727808840877482,
							"parameters": {
								"tag": "\"Deck\""
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "DeckArray",
							"sid": 643729049370048,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "CardSpawnArea",
							"sid": 109611288589117,
							"parameters": {
								"instance-variable": "Available",
								"value": "true"
							}
						}
					],
					"sid": 521739279925855
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 796929985449487,
							"parameters": {
								"object": "CardSpawnArea"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "CardSpawnArea",
							"sid": 213458509604502,
							"parameters": {
								"instance-variable": "Available"
							}
						}
					],
					"actions": [
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 276278491250568,
							"parameters": {
								"object-name": "DeckArray.At(0, DeckArray.Index % DeckArray.Height, 0)",
								"layer": "\"Top of GUI\"",
								"x": "-100",
								"y": "-100",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "DeckArray",
							"sid": 575386206895660,
							"parameters": {
								"instance-variable": "Index",
								"value": "1"
							}
						}
					],
					"sid": 361156894708575,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 528590332885816,
									"parameters": {
										"first-value": "DeckArray.Index",
										"comparison": 4,
										"second-value": "0"
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 566951730436456,
									"parameters": {
										"first-value": "DeckArray.Index % 10",
										"comparison": 0,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"customAction": "New Event",
									"objectClass": "ScoringTable",
									"sid": 558615165348920,
									"parameters": [
										"DeckArray.Index & \" cards!\""
									]
								}
							],
							"sid": 332962422851842
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "RegisterSpawnArea",
					"objectClass": "Card",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "uid",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 838169824746395
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 618920742866268,
							"parameters": {
								"instance-variable": "CardSpawnAreaUID",
								"value": "uid"
							}
						}
					],
					"sid": 233659194031935,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "CardSpawnArea",
									"sid": 724722525775291,
									"parameters": {
										"unique-id": "uid"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "CardSpawnArea",
									"sid": 341009847104698,
									"parameters": {
										"instance-variable": "Available",
										"value": "false"
									}
								}
							],
							"sid": 404608348349544
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Card",
							"sid": 539249566723296
						}
					],
					"actions": [],
					"sid": 801554494463945,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 254777251852568,
									"parameters": {
										"object": "CardSpawnArea",
										"expression": "CardSpawnArea.Available"
									}
								},
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 449829269054067,
									"parameters": {
										"object": "CardSpawnArea"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 232504699792195,
									"parameters": {
										"instance-variable": "CardSpawnAreaUID",
										"value": "CardSpawnArea.UID"
									}
								},
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 614378850549182,
									"parameters": {
										"x": "CardSpawnArea.X",
										"y": "CardSpawnArea.Y"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "CardSpawnArea",
									"sid": 765680477525075,
									"parameters": {
										"instance-variable": "Available",
										"value": "false"
									}
								}
							],
							"sid": 436118143486274
						}
					]
				}
			],
			"sid": 728536538628741
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Drag and Drop",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "Card",
							"sid": 240808927891102,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 344293353270420,
							"parameters": {
								"instance-variable": "OriginalX",
								"value": "Card.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 856055794014100,
							"parameters": {
								"instance-variable": "OriginalY",
								"value": "Card.Y"
							}
						},
						{
							"id": "move-to-layer",
							"objectClass": "Card",
							"sid": 508904187083269,
							"parameters": {
								"layer": "\"In-World GUI\""
							}
						}
					],
					"sid": 574882652983957
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "Card",
							"sid": 359151581988198,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Card",
							"sid": 767722486139146,
							"parameters": {
								"x": "Touch.X",
								"y": "Touch.Y"
							}
						}
					],
					"sid": 776132407625566
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "Card",
							"sid": 515420141143145,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [],
					"sid": 185608364689916,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 360597725349657,
									"parameters": {
										"object": "CardSlot"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 736725489005035,
									"parameters": {
										"x": "CardSlot.BBoxMidX",
										"y": "CardSlot.BBoxMidY"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 707692172301273,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "destroy",
									"objectClass": "CardSlot",
									"sid": 468675428965171
								},
								{
									"customAction": "UnregisterSpawnArea",
									"objectClass": "Card",
									"sid": 200782858527844
								},
								{
									"customAction": "SpawnEffect",
									"objectClass": "Card",
									"sid": 892955600295769,
									"parameters": [
										"CardSlot.X",
										"CardSlot.Y"
									]
								},
								{
									"id": "start-fade",
									"objectClass": "Card",
									"sid": 389335098878682,
									"behaviorType": "Fade"
								}
							],
							"sid": 706273646720440
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 715334220832809
								}
							],
							"actions": [
								{
									"id": "move-to-layer",
									"objectClass": "Card",
									"sid": 251256196388687,
									"parameters": {
										"layer": "\"Top of GUI\""
									}
								},
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 188316928576538,
									"parameters": {
										"x": "Card.OriginalX",
										"y": "Card.OriginalY"
									}
								}
							],
							"sid": 781231869796032
						}
					]
				},
				{
					"aceType": "action",
					"aceName": "UnregisterSpawnArea",
					"objectClass": "Card",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [],
					"sid": 227986951827876,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "CardSpawnArea",
									"sid": 387896173359908,
									"parameters": {
										"unique-id": "Card.CardSpawnAreaUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "CardSpawnArea",
									"sid": 790865159845344,
									"parameters": {
										"instance-variable": "Available",
										"value": "true"
									}
								}
							],
							"sid": 606415599499501
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 190318699072804,
									"parameters": {
										"instance-variable": "CardSpawnAreaUID",
										"value": "-1"
									}
								}
							],
							"sid": 866264404826313
						}
					]
				}
			],
			"sid": 597653295021999
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Slow Motion",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "Card",
							"sid": 645406831420016,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 165306423744231,
							"parameters": {
								"variable": "SlowMotion",
								"value": "true"
							}
						}
					],
					"sid": 954492198556250
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "Card",
							"sid": 130568818016558,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 623156019200912,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 589213323976389,
							"parameters": {
								"variable": "SlowMotion",
								"value": "false"
							}
						}
					],
					"sid": 590887758342959
				}
			],
			"sid": 847343651163707
		},
		{
			"aceType": "action",
			"aceName": "SpawnEffect",
			"objectClass": "Card",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "X",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 867218475720442
				},
				{
					"name": "Y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 506669045751540
				}
			],
			"eventType": "custom-ace-block",
			"conditions": [],
			"actions": [
				{
					"id": "create-object-by-name",
					"objectClass": "System",
					"sid": 828766399116146,
					"parameters": {
						"object-name": "Card.Effect",
						"layer": "\"Characters\"",
						"x": "X",
						"y": "Y",
						"create-hierarchy": false,
						"template-name": "\"\""
					}
				}
			],
			"sid": 837144224025973
		}
	],
	"sid": 736182713874103
}